
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>WeQueue</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="./node_modules/jquery/dist/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>



    <!-- Custom styles for this template -->
    <link href="signin.css" rel="stylesheet">
  </head>

  <body>
     <div class="jumbotron" style="padding-bottom:60px;background-color:#f2bb15;border-bottom:2px #000 solid">
     <div class="container">
     <h1>WeQueue</h1>
     <h5>We queue for you, so you don't have to...</h5>
     </div>
     </div>
    <div id="optionsList" style="margin-top:-20%">
    <div class="container">
    <div class="jumbotron" style="border:2px #000 solid;padding-top:15px;padding-bottom:15px">1. Enter your phone number. <br/>2. Select the service you want to use.</div>
      <input type="email" class="form-control" id="phoneNumberId" placeholder="Phone Number"><br/>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('normal')">Personal Banking</button>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('goldenCard')">Golden Card Customers</button>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('goldenSunflower')">Golden Sunflower Customers</button>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('cash')">Cash Transactions</button>

    </div>
    </div>

    <div class="container" id="waitTimeContainer">
    <div class="jumbotron" style="background-color:#fff">
      <p> Thank you for registering at <span id="companyName"></span> </p>
      <p> Estimated wait time is <span id="waitTime"></span> mins </p>
       <div class="jumbotron" style="border-bottom: 3px #000 solid;border-top: 3px #000 solid">
        <div class="container row">
<h3 class="col-xs-10">
  <div style="vertical-align:middle;">
  Your current position:
  </div>
</h3>
<div class="col-xs-2">
<h5>11</h5>
<h4>12</h4>
<h1>13</h1>
<h4>14</h4>
<h5>15</h5>
</div>

</div>
      </div>
    </div>
    </div>

      <script type="text/javascript">

      $("#waitTimeContainer").hide();

      function getParameterByName(name, url) {
        if (!url) {
          url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
      }

      companyName = getParameterByName('company');

      function submit(service) {
        // result = $.post("http://172.20.10.3:3000/user",
        result = $.post("https://wequeue-timqian1.c9users.io/user",  
          {"phone":$('#phoneNumberId').val(),"company":companyName,"service":service},
          function(result){
            console.log("New success message");

            console.log(result);

            $("#companyName").text(result.company);
            $("#queueNumber").text(result.queuePosition);
            $("#service").text(result.service);
            $("#waitTime").text(result.waitTime);

              

            $("#optionsList").hide();
            $("#waitTimeContainer").show();
        }).fail(function(result) {
          console.log(result);
        });
        
      }

    </script>
  </body>
</html>
