
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>WeQueue</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <script src="./node_modules/jquery/dist/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>



    <!-- Custom styles for this template -->
    <link href="signin.css" rel="stylesheet">
  </head>

  <body>


    <div id="optionsList">
    <div class="container">
      <input type="email" class="form-control" id="phoneNumberId" placeholder="Phone Number"><br/>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('create')">Create a bank account</button>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('transfer')">International Transfer</button>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('open')">Open Account</button>
        <button class="btn btn-lg btn-primary btn-block" onclick="submit('close')">Close Account</button>

    </div>
    </div>

    <div class="container" id="waitTimeContainer">
    <div class="jumbotron" style="background-color:#fff">
      <p> Thank you for registering at <span id="companyName"></span> </p>
      <p> You are #<span id="queueNumber"></span> for <span id="service"></span></p>
      <p> Estimated wait time is <span id="waitTime"></span> mins </p>
    </div>
    </div>

      <script type="text/javascript">

      $("#waitTimeContainer").hide();

      function getParameterByName(name, url) {
        if (!url) {
          url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
      }

      function submit(service) {
        result = $.post("http://172.20.10.3:3000/user",
          {"phone":$('#phoneNumberId').val(),"company":"icbc","service":"personal"},
          function(result){
            console.log("New success message");

            console.log(result);

            $("#companyName").text(result.company);
            $("#queueNumber").text(result.queuePosition);
            $("#service").text(result.service);
            $("#waitTime").text(result.waitTime);

              

            $("#optionsList").hide();
            $("#waitTimeContainer").show();
        }).fail(function(result) {
          console.log(result);
        });
        
      }

    </script>
  </body>
</html>
